#!/bin/bash

TSC_COPYRIGHT="Copyright: Kaiserrundfunk.com / Jonacast 2019"
TSC_DONTEDIT="Created by Configure at compiling - do not edit this file"
TSC_TIMESTAMP=`date "+%d.%m.%Y %H:%M:%S"`

# name of the game :-)
TSC_Proj="vipclub"

# directories
TSC_Src="./src/"
TSC_Doc="./doc"

# version
TSC_Major="0"
TSC_Minor="1"
TSC_Release="1"
TSC_Patch="1"

TSC_Name=$TSC_Proj-$TSC_Major.$TSC_Minor.$TSC_Release-$TSC_Patch

TSC_CMK=$TSC_Src"config.mk"
TSC_H=$TSC_Src"config.h"
TSC_MF=$TSC_Src"Makefile"
TSC_SPEC=$TSC_Name".spec"


TSC_Echo=`which echo`
TSC_Echoe=`which echo`" -e"
TSC_MK=`which make`

# $1 start definition line #define or empty 
# $2 start remark line
# $3 start action line
# $4 assignment operator or empty
# $5 outputfile

tsc_write_env (){

    $TSC_Echoe "write" $5
    $TSC_Echoe "$2 "$TSC_COPYRIGHT > $5
    $TSC_Echoe "\n$2 $5 "$TSC_TIMESTAMP >> $5
    $TSC_Echoe "\n$2 "$TSC_DONTEDIT >> $5
    $TSC_Echoe "\n\n$2 Globals:\n" >> $5
    $TSC_Echoe $1"TSC_NAME$4"$TSC_Name >> $5

    $TSC_Echoe $1"TSC_Major$4"$TSC_Major >> $5
    $TSC_Echoe $1"TSC_Minor$4"$TSC_Major >> $5
    $TSC_Echoe $1"TSC_Release$4"$TSC_Release >> $5
    $TSC_Echoe $1"TSC_Patch$4"$TSC_Patch >> $5

    $TSC_Echo $1"TSC_Echo$4"$TSC_Echo >> $5
    $TSC_Echoe $1"TSC_Echoe$4"$TSC_Echoe >> $5
    $TSC_Echoe $1"TSC_MK$4"$TSC_MK >> $5

}

tsc_write_env "" "#" "" "=" $TSC_CMK
tsc_write_env "#define " "//" "" " " $TSC_H

tcc_write_spec (){
    $TSC_Echoe "#\n# Spec-File for "$TSC_Name"\n#" > $TSC_SPEC
    $TSC_Echoe "Summary: A VIP-Club Plugin for Broadcasters" >> $TSC_SPEC
    $TSC_Echoe "Version: "$TSC_Major"."$TSC_Minor  >> $TSC_SPEC
    $TSC_Echoe "Release: "$TSC_Release"-"$TSC_Patch >> $TSC_SPEC
    $TSC_Echoe "License: MIT" >> $TSC_SPEC
    $TSC_Echoe "Group: Applications/Multimedia" >> $TSC_SPEC
    $TSC_Echoe "Source: https://github.com/Chartwalker/VipClub/stable/$TSC_Name.tar.gz" >> $TSC_SPEC
    $TSC_Echoe "URL: https://github.com/Chartwalker/VipClub" >> $TSC_SPEC
    $TSC_Echoe "Group: Applications/Multimedia" >> $TSC_SPEC
    $TSC_Echoe "\n%description: >> $TSC_SPEC


}